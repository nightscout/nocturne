// AUTO-GENERATED - DO NOT EDIT
// Generated by @nocturne/remote-function-codegen
// Source: openapi.json

import { getRequestEvent, query } from '$app/server';
import { error, redirect } from '@sveltejs/kit';
import { z } from 'zod';

/** Get the current battery status for all tracked devices */
export const getCurrentBatteryStatus = query(z.object({ recentMinutes: z.number().optional() }).optional(), async (params) => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.battery.getCurrentBatteryStatus(params?.recentMinutes);
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in battery.getCurrentBatteryStatus:', err);
    throw error(500, 'Failed to get current battery status');
  }
});

/** Get battery readings for a device over a time period */
export const getBatteryReadings = query(z.object({ device: z.string().optional(), from: z.number().optional(), to: z.number().optional() }).optional(), async (params) => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.battery.getBatteryReadings(params?.device, params?.from, params?.to);
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in battery.getBatteryReadings:', err);
    throw error(500, 'Failed to get battery readings');
  }
});

/** Get battery statistics for a device or all devices */
export const getBatteryStatistics = query(z.object({ device: z.string().optional(), from: z.number().optional(), to: z.number().optional() }).optional(), async (params) => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.battery.getBatteryStatistics(params?.device, params?.from, params?.to);
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in battery.getBatteryStatistics:', err);
    throw error(500, 'Failed to get battery statistics');
  }
});

/** Get charge cycle history for a device */
export const getChargeCycles = query(z.object({ device: z.string().optional(), from: z.number().optional(), to: z.number().optional(), limit: z.number().optional() }).optional(), async (params) => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.battery.getChargeCycles(params?.device, params?.from, params?.to, params?.limit);
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in battery.getChargeCycles:', err);
    throw error(500, 'Failed to get charge cycles');
  }
});

/** Get list of all known devices with battery data */
export const getKnownDevices = query(async () => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.battery.getKnownDevices();
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in battery.getKnownDevices:', err);
    throw error(500, 'Failed to get known devices');
  }
});
