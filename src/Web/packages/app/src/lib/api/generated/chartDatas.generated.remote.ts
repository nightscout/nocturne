// AUTO-GENERATED - DO NOT EDIT
// Generated by @nocturne/remote-function-codegen
// Source: openapi.json

import { getRequestEvent, query } from '$app/server';
import { error, redirect } from '@sveltejs/kit';
import { z } from 'zod';

/** Get complete dashboard chart data in a single call.
Returns pre-calculated IOB, COB, basal series, categorized treatment markers,
state spans, system events, tracker markers, and glucose readings. */
export const getDashboardChartData = query(z.object({ startTime: z.number().optional(), endTime: z.number().optional(), intervalMinutes: z.number().optional() }).optional(), async (params) => {
  const { locals } = getRequestEvent();
  const { apiClient } = locals;
  try {
    return await apiClient.chartData.getDashboardChartData(params?.startTime, params?.endTime, params?.intervalMinutes);
  } catch (err) {
    const status = (err as any)?.status;
    if (status === 401) { const { url } = getRequestEvent(); throw redirect(302, `/login?redirectTo=${encodeURIComponent(url.pathname + url.search)}`); }
    if (status === 403) throw error(403, 'Forbidden');
    console.error('Error in chartData.getDashboardChartData:', err);
    throw error(500, 'Failed to get dashboard chart data');
  }
});
