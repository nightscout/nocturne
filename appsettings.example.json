{
  "ConnectionStrings": {
    // Used only when PostgreSql.UseRemoteDatabase is true
    "nocturne-postgres": "Host=localhost;Port=5432;Database=nocturne;Username=nocturne_user;Password=nocturne_password"
  },
  "Parameters": {
    "postgres-username": "nocturne_user",
    "postgres-password": "nocturne_password",
    "postgres-database": "nocturne",
    "api-secret": "",
    "signalr-hub-url": "http://localhost:1612/hubs/data",
    "Connectors": {
      "Dexcom": {
        "Enabled": false,
        "Username": "",
        "Password": "",
        "Region": "us",
        "Server": "share2.dexcom.com",
        "SyncIntervalMinutes": 5
      },
      "Glooko": {
        "Enabled": false,
        "Email": "",
        "Password": "",
        "Server": "api.glooko.com",
        "TimezoneOffset": 0,
        "SyncIntervalMinutes": 5
      },
      "LibreLinkUp": {
        "Enabled": false,
        "Username": "",
        "Password": "",
        "Region": "US",
        "PatientId": "",
        "Server": "",
        "SyncIntervalMinutes": 5
      },
      "CareLink": {
        "Enabled": false,
        "Username": "",
        "Password": "",
        "Region": "us",
        "CountryCode": "US",
        "PatientUsername": "",
        "SyncIntervalMinutes": 5
      },
      "Nightscout": {
        "Enabled": false,
        "SourceEndpoint": "",
        "SourceApiSecret": "",
        "SyncIntervalMinutes": 5
      },
      "MyFitnessPal": {
        "Enabled": false,
        "Username": "",
        "Password": "",
        "SyncDays": 7,
        "SyncIntervalMinutes": 5
      }
    },
    "CompatibilityProxy": {
      "Enabled": false,
      "NightscoutUrl": "",
      "NightscoutApiSecret": "",
      "TimeoutSeconds": 30,
      "RetryAttempts": 3,
      "DefaultStrategy": "Nightscout",
      "EnableDetailedLogging": false,
      "Comparison": {
        "EnableDeepComparison": true
      }
    },
    "DemoMode": {
      "Enabled": false,
      "ClearOnStartup": true,
      "RegenerateOnStartup": true,
      "HistoryDays": 90,
      "IntervalMinutes": 5,
      "TargetGlucose": 110.0,
      "InsulinSensitivity": 50.0,
      "CarbRatio": 10.0,
      "InsulinOnBoardDecayMinutes": 180,
      "CarbsOnBoardDecayMinutes": 120,
      "BasalRate": 1.0,
      "Device": "demo-cgm"
    }
  },
  "WebSocket": {
    "ReconnectAttempts": 5,
    "MaxReconnectDelay": 30000,
    "ReconnectDelay": 1000,
    "PingTimeout": 15000,
    "PingInterval": 20000
  },
  "PostgreSql": {
    "UseRemoteDatabase": false, // if true, uses ConnectionStrings.nocturne-postgres; if false, Aspire manages local container
    "EnableSensitiveDataLogging": false,
    "EnableDetailedErrors": false,
    "MaxRetryCount": 3,
    "MaxRetryDelaySeconds": 30,
    "CommandTimeoutSeconds": 30
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "Microsoft.Extensions.Hosting": "Information",
      "Yarp": "Information",
      "Nocturne": "Information"
    },
    "Console": {
      "IncludeScopes": false,
      "LogLevel": {
        "Default": "Information"
      }
    }
  },
  "JwtSettings": {
    "SecretKey": "YourJWTSecretKeyShouldBeAtLeast32CharactersLongForSecurityReasons",
    "Issuer": "Nocturne",
    "Audience": "NightscoutClient",
    "ExpirationHours": 24
  },
  "AllowedHosts": "*",
  "ApiSettings": {
    "DefaultPageSize": 50,
    "MaxPageSize": 1000,
    "EnableSwagger": true,
    "EnableCors": true,
    "RateLimiting": {
      "Enabled": false,
      "RequestsPerMinute": 100
    }
  },
  "NightscoutSettings": {
    "ApiSecret": "your-nightscout-api-secret",
    "BaseUrl": "https://your-nightscout-instance.herokuapp.com",
    "DefaultUnits": "mg/dl",
    "TimeFormat": 12,
    "Language": "en",
    "Theme": "default",
    "ShowPlugins": ["delta", "direction", "timeago", "devicestatus"],
    "Alarms": {
      "UrgentHigh": {
        "Enabled": true,
        "Threshold": 400,
        "Minutes": [15, 30, 60]
      },
      "High": {
        "Enabled": true,
        "Threshold": 260,
        "Minutes": [30, 60]
      },
      "Low": {
        "Enabled": true,
        "Threshold": 55,
        "Minutes": [15, 30, 45, 60]
      },
      "UrgentLow": {
        "Enabled": true,
        "Threshold": 39,
        "Minutes": [5, 10, 15, 30]
      }
    },
    "Thresholds": {
      "High": 260,
      "TargetTop": 180,
      "TargetBottom": 80,
      "Low": 55
    }
  },
  "NotificationSettings": {
    "Pushover": {
      "Enabled": false,
      "ApiToken": "your-pushover-api-token",
      "UserKey": "your-pushover-user-key",
      "Sounds": {
        "WARN": "default",
        "URGENT": "siren",
        "INFO": "none"
      }
    },
    "Email": {
      "Enabled": false,
      "SmtpServer": "smtp.example.com",
      "SmtpPort": 587,
      "Username": "your-email@example.com",
      "Password": "your-email-password",
      "FromAddress": "nightscout@example.com",
      "ToAddress": "alerts@example.com"
    }
  },
  "HealthChecks": {
    "Enabled": true,
    "DetailedErrors": false,
    "Checks": {
      "Database": {
        "Enabled": true,
        "Timeout": "00:00:30"
      }
    }
  },
  "OpenTelemetry": {
    "ServiceName": "Nocturne",
    "ServiceVersion": "1.0.0",
    "Tracing": {
      "Enabled": false,
      "Exporters": ["console", "otlp"],
      "OtlpEndpoint": "http://localhost:4317"
    },
    "Metrics": {
      "Enabled": false,
      "Exporters": ["console", "otlp"]
    }
  }
}
